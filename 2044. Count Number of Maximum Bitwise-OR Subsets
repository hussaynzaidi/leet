int countSubsets(int* nums, int numsSize, int index, int currentOr, int targetOr) {
    if (index == numsSize) {
        return (currentOr == targetOr) ? 1 : 0;
    }

    // Skip current element
    int countWithout = countSubsets(nums, numsSize, index + 1, currentOr, targetOr);

    // Include current element
    int countWith = countSubsets(nums, numsSize, index + 1, currentOr | nums[index], targetOr);

    return countWithout + countWith;
}

int countMaxOrSubsets(int* nums, int numsSize) {
    int maxOrValue = 0;
    for (int i = 0; i < numsSize; i++) {
        maxOrValue |= nums[i];
    }

    return countSubsets(nums, numsSize, 0, 0, maxOrValue);
}
