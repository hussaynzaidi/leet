#pragma GCC optimize("O3", "unroll-loops")
int countValidSelections(int* nums, int n) {
    int prefix=0, cnt=0, sum=0;
    for(int i=0; i<n; i++) sum+=nums[i];
    for(int i=0; i<n; i++){
        const int x=nums[i];
        prefix+=x;
        if (x==0){
            const int move=fmax(2-abs(2*prefix-sum), 0);
            cnt+=move;
        }
    }
    return cnt;
}
